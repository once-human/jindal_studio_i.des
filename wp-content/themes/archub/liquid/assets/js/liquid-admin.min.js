!function($){var e=function(e,t){var i=this;i.id=e,i.options=t,this.init=function(){var e=$("#lqd-popup");this.options.slice();e.hide(),$("#liquid-import-emoj").hide(),e.hide(),$(document.body).append(_.template($("#tmpl-demo-import-modules").html())({modules:this.options}));var o=new FormData;o.append("action","ocdi_import_demo_data"),o.append("selected",2),o.append("selections",t),function(e,t){var i=0;e[i]&&n("liquid_"+e[e.length-e.length],e,t,(function(){i++,e[i]&&n("liquid_"+e[i],e,t,(function(){i++,e[i]&&n("liquid_"+e[i],e,t,(function(){i++,e[i]&&n("liquid_"+e[i],e,t,(function(){i++,e[i]&&n("liquid_"+e[i],e,t,(function(){i++,e[i]&&n("liquid_"+e[i],e,t)}))}))}))}))}))}(i.options,i.id)},this.init()};function t(){var e,t,i,n,o;return $.ajax({url:ajaxurl,type:"GET",data:{action:"liquid_total_imported"}}).done((function(a){return e=parseInt(a.match(/(?:(?!\|).)*/i)[0]),a.indexOf("|")?(n=a.substring(0,a.indexOf("|")),o=a.replace(n,"")):o=e,o.match(/(\d+)(?!.*\d)/i)?(t=parseInt(o.match(/(\d+)(?!.*\d)/i)[0]),i=parseInt(100*t/e)):i=parseInt("100"),$("#lqd-loader").parent().css("width",i-1+"%"),$("#lqd-loader").text(i-1+"%"),!1})),!1}function i(){return $.ajax({url:ajaxurl,type:"GET",data:{action:"liquid_progress_imported"}}).done((function(e){return $("#liquid-progress").text(e),!1})),!1}function n(e,n,o,a){var r,l;r=setInterval(t,5e3),$.ajax({url:ajaxurl,type:"POST",data:{action:e,demo:o,content:$("#lqd-imp-all").is(":checked")?1:0,media:$("#lqd-imp-media").is(":checked")?1:0},beforeSend:function(e){$.ajax({url:ajaxurl,type:"POST",data:{action:"liquid_reset_logs"}}),l=setInterval(i,5e3)},success:function(e){},complete:function(){"function"!=typeof a||e.match("undefined")||a(),clearInterval(r),clearInterval(l)}}).done((function(){if("liquid_"+n[n.length-1]===e){clearInterval(r),clearInterval(l);var t=$("#liquid-popup");if($("#lqd-loader").parent().css("min-width","100%"),$("#lqd-loader").text("100%"),setTimeout((function(){$("#liquid-import-emoj").show(),$("#lqd-progress-popup").hide(),$("#liquid-progress").hide(),setTimeout((function(){t.remove()}),1e4)}),800),jQuery.post(ajaxurl,{action:"hub_cache_purge"},(function(e){console.log(e)})),"undefined"!=typeof merlin_params){var i=window.location.href;i=i.replace("content","ready"),window.location.href=i,localStorage.removeItem("liquid_setup_builder")}return!1}}))}function o(t){var i=$("#lqd-popup");i.on("click",".lqd-imp-popup-close",(function(){i.remove()})),i.on("click",".agree",(function(){var e=$(this),t=e.parent();e.is(":checked")?t.addClass("checked"):t.removeClass("checked")})),i.on("click",".lqd-import-btn",(function(){var i=$(this),n=[];i.parent().parent().find("#lqd-import-opts .lqd-imp-opt :checked").each((function(){n.push($(this).val())}));new e(t,n,t)}))}var a={init:function(){this.oneCollectionLazyLoad(),this.initTabs(),this.filterDemos("wpbakery"),this.initDemo(),this.initIconpicker(),this.initLightboxTrigger()},initDemo:function(){$(".lqd-solid-wrap").on("click",".lqd-import-popup",(function(){if(!$(".liquid-error-message").length){var e=$(this).data("demo-id"),t=liquid_demos[e];$(this).attr("data-import-id");return $.ajax({url:ajaxurl,type:"GET",data:{action:"liquid_prepare_demo_package",demo:e},beforeSend:function(){$("#liquid-demo-loader").addClass("is-active")}}).done((function(i){var n=JSON.parse(i);if(1===n.stat)$.ajax({url:ajaxurl,type:"POST",data:{action:"liquid_require_plugins",demo:e}}).done((function(i){var n;$("#liquid-demo-loader").removeClass("is-active"),ret=JSON.parse(i),1==ret.stat?($(document.body).append(_.template($("#tmpl-demo-popup").html())(t)),o(e)):0==ret.stat&&(message=message="Please install/activate <strong>"+ret.plugins.toString()+"</strong>","function"==typeof(n=function(){$.confirm({title:"Missing Required Plugins",content:message,buttons:{new:{text:"Back to Install Plugins",action:function(){var e;"undefined"!=typeof merlin_params?(e=(e=window.location.href).replace("content","plugins"),window.location.href=e):(e=(e=window.location.href).replace("liquid-import-demos","liquid-plugins"),window.location.href=e)}},confirm:{text:"I understand, let's import, please",btnClass:"btn-blue",keys:["enter","shift"],action:function(){$(document.body).append(_.template($("#tmpl-demo-popup").html())(t)),o(e)}}}})})&&n())}));else{$("#liquid-demo-loader").removeClass("is-active");var a="Error:",r="Please, Activate ArcHub Core plugin";0===n.stat&&null!=n.message&&(a="Error",r=n.message),$.confirm({title:a,content:r,buttons:{confirm:{text:"Ok",btnClass:"btn-blue",keys:["enter","shift"],action:function(){}},cancel:function(){}}})}})),!1}}))},oneCollectionLazyLoad:function(){var e=document.querySelectorAll(".vc_ui-template");e.length>=0&&e.forEach((e=>{new IntersectionObserver((([e],t)=>{const i=e.target.querySelector("img");e.isIntersecting&&(i.src=i.getAttribute("data-src"),i.classList.add("img-loaded"),t.unobserve(e.target))})).observe(e)}))},initIconpicker:function(){$.isFunction($.fn.fontIconPicker)&&$(".liquid-icon-picker").fontIconPicker()},initTabs:function(){const e=localStorage.getItem("liquid_setup_builder"),t=$("#lqd-demos"),i=$(".lqd-tab-nav",t),n=$("a",i),o=$(".merlin__builder-buttons"),a=$(".merlin__builder--elementor, .merlin__builder--vc",o);e&&(t.length&&this.filterDemos({$demosContainer:t,$navLinks:n},e),o.length&&("wpbakery"===e?a.filter(((e,t)=>t.classList.contains("merlin__builder--vc"))).trigger("click"):"elementor"===e&&a.filter(((e,t)=>t.classList.contains("merlin__builder--elementor"))).trigger("click"))),n.on("click",(e=>{e.preventDefault(),e.stopPropagation();const i=$(e.target).attr("data-filter");this.filterDemos({$demosContainer:t,$navLinks:n},i)}))},filterDemos({$demosContainer:e,$navLinks:t},i){if(!e||!t||!i)return;const n=$(".lqd-tab-content",e),o=$(".lqd-col",n);t.removeClass("active").filter(((e,t)=>$(t).attr("data-filter")===i)).addClass("active"),o.hide().filter(((e,t)=>t.classList.contains(i))).show()},initLightboxTrigger(){$("[data-lqd-dsd-lightbox]").each(((e,t)=>{const i=$(t),n=$(i.attr("data-lqd-dsd-lightbox")),o=$(n);if(o.length){const e=o.find("iframe");i.on("click",(t=>{t.preventDefault(),t.stopPropagation(),o[0].showModal(),e.attr("src",e.attr("data-src"))}))}}))}};jQuery(document).ready((function(){a.init()})),jQuery(document).ajaxComplete((function(e){a.initIconpicker()}))}(jQuery);